<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="665px" preserveAspectRatio="none" style="width:742px;height:665px;background:#FFFFFF;" version="1.1" viewBox="0 0 742 665" width="742px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.2969" id="_title" style="stroke:none;stroke-width:1.0;" width="343" x="196.5" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="333" x="201.5" y="27.9951">Managed Subscribe Interceptor Sequence</text><rect fill="#DDDDDD" height="616.6484" style="stroke:#181818;stroke-width:0.5;" width="573" x="163" y="43.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="434" y="55.3638">Ibeji</text><rect fill="none" height="368.3906" style="stroke:#000000;stroke-width:1.5;" width="582" x="76" y="181.9922"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="81" x2="81" y1="93.7266" y2="625.6484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="270" x2="270" y1="93.7266" y2="625.6484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="653" x2="653" y1="93.7266" y2="625.6484"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="152" x="5" y="62.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="12" y="82.4248">Digital Twin Provider</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="152" x="5" y="624.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="12" y="644.6436">Digital Twin Provider</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="206" x="167" y="62.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="174" y="82.4248">Managed Subscribe Module</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="206" x="167" y="624.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="174" y="644.6436">Managed Subscribe Module</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="158" x="574" y="62.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144" x="581" y="82.4248">InVehicle Digital Twin</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="158" x="574" y="624.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144" x="581" y="644.6436">InVehicle Digital Twin</text><polygon fill="#181818" points="258,120.8594,268,124.8594,258,128.8594,262,124.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="81" x2="264" y1="124.8594" y2="124.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="88" y="119.7935">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="101" y="119.7935">Register - request</text><line style="stroke:#181818;stroke-width:1.0;" x1="270" x2="312" y1="153.9922" y2="153.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="312" x2="312" y1="153.9922" y2="166.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="271" x2="312" y1="166.9922" y2="166.9922"/><polygon fill="#181818" points="281,162.9922,271,166.9922,281,170.9922,277,166.9922" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="277" y="148.9263">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="290" y="148.9263">Intercepts Register request</text><path d="M76,181.9922 L140,181.9922 L140,189.125 L130,199.125 L76,199.125 L76,181.9922 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="368.3906" style="stroke:#000000;stroke-width:1.5;" width="582" x="76" y="181.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="91" y="195.0591">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="240" x="155" y="194.2026">[contains `ManagedSubscribe` Entry]</text><path d="M86,204.125 L86,335.125 L423,335.125 L423,214.125 L413,204.125 L86,204.125 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M413,204.125 L413,214.125 L423,214.125 L413,204.125 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="293" x="92" y="221.1919">// Entry that indicates to Ibeji that the Provider</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="316" x="92" y="236.3247">// wants to utilize the Managed Subscribe Module.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="92" y="251.4575">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="108" y="266.5903">protocol: "grpc"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="108" y="281.7231">operations: ["ManagedSubscribe"]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="108" y="296.856">uri: "Provider callback uri"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="108" y="311.9888">context: ""</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="92" y="327.1216">}</text><line style="stroke:#181818;stroke-width:1.0;" x1="270" x2="312" y1="361.3203" y2="361.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="312" x2="312" y1="361.3203" y2="374.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="271" x2="312" y1="374.3203" y2="374.3203"/><polygon fill="#181818" points="281,370.3203,271,374.3203,281,378.3203,277,374.3203" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="277" y="356.2544">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="290" y="356.2544">Store provider callback.</text><line style="stroke:#181818;stroke-width:1.0;" x1="270" x2="312" y1="403.4531" y2="403.4531"/><line style="stroke:#181818;stroke-width:1.0;" x1="312" x2="312" y1="403.4531" y2="416.4531"/><line style="stroke:#181818;stroke-width:1.0;" x1="271" x2="312" y1="416.4531" y2="416.4531"/><polygon fill="#181818" points="281,412.4531,271,416.4531,281,420.4531,277,416.4531" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="277" y="398.3872">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="356" x="290" y="398.3872">Modify the request's `ManagedSubscribe` endpointInfo.</text><path d="M275,429.4531 L275,544.4531 L616,544.4531 L616,439.4531 L606,429.4531 L275,429.4531 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M606,429.4531 L606,439.4531 L616,439.4531 L606,429.4531 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320" x="281" y="446.52">// Points to the Managed Subscribe gRPC endpoint</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="281" y="461.6528">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="297" y="476.7856">protocol: "grpc"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="297" y="491.9185">operations: ["ManagedSubscribe"]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="297" y="507.0513">uri: "Ibeji uri"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="297" y="522.1841">context: "GetSubscriptionInfo"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="281" y="537.3169">}</text><polygon fill="#181818" points="641,574.5156,651,578.5156,641,582.5156,645,578.5156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="270" x2="647" y1="578.5156" y2="578.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="277" y="573.4497">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="290" y="573.4497">Passes on Register request</text><polygon fill="#181818" points="92,603.6484,82,607.6484,92,611.6484,88,607.6484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="86" x2="652" y1="607.6484" y2="607.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="98" y="602.5825">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="111" y="602.5825">Register - response</text><!--MD5=[d15460daaa2040a2f2263b395063e3f8]
@startuml Managed Subscribe Interceptor
title Managed Subscribe Interceptor Sequence
participant "Digital Twin Provider" as DTProvider
box "Ibeji"
participant "Managed Subscribe Module" as ManagedSubscribeModule
participant "InVehicle Digital Twin" as Ibeji
end box

autonumber

DTProvider -> ManagedSubscribeModule: Register - request
ManagedSubscribeModule -> ManagedSubscribeModule: Intercepts Register request

alt contains `ManagedSubscribe` Entry
note right of DTProvider
// Entry that indicates to Ibeji that the Provider
// wants to utilize the Managed Subscribe Module.
{
    protocol: "grpc"
    operations: ["ManagedSubscribe"]
    uri: "Provider callback uri"
    context: ""
}
end note
ManagedSubscribeModule -> ManagedSubscribeModule: Store provider callback.
ManagedSubscribeModule -> ManagedSubscribeModule: Modify the request's `ManagedSubscribe` endpointInfo.
note right of ManagedSubscribeModule
// Points to the Managed Subscribe gRPC endpoint
{
    protocol: "grpc"
    operations: ["ManagedSubscribe"]
    uri: "Ibeji uri"
    context: "GetSubscriptionInfo"
}
end note
end

Ibeji <- ManagedSubscribeModule: Passes on Register request
Ibeji -> DTProvider: Register - response
@enduml

PlantUML version 1.2022.7(Mon Aug 22 10:01:30 PDT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>