<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="711px" preserveAspectRatio="none" style="width:742px;height:711px;background:#FFFFFF;" version="1.1" viewBox="0 0 742 711" width="742px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.2969" id="_title" style="stroke:none;stroke-width:1.0;" width="343" x="196.5" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="333" x="201.5" y="27.9951">Managed Subscribe Interceptor Sequence</text><rect fill="#DDDDDD" height="662.0469" style="stroke:#181818;stroke-width:0.5;" width="573" x="163" y="43.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="434" y="55.3638">Ibeji</text><rect fill="none" height="413.7891" style="stroke:#000000;stroke-width:1.5;" width="582" x="76" y="181.9922"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="81" x2="81" y1="93.7266" y2="671.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="270" x2="270" y1="93.7266" y2="671.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="653" x2="653" y1="93.7266" y2="671.0469"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="152" x="5" y="62.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="12" y="82.4248">Digital Twin Provider</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="152" x="5" y="670.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="12" y="690.042">Digital Twin Provider</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="206" x="167" y="62.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="174" y="82.4248">Managed Subscribe Module</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="206" x="167" y="670.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="174" y="690.042">Managed Subscribe Module</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="158" x="574" y="62.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144" x="581" y="82.4248">InVehicle Digital Twin</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="158" x="574" y="670.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144" x="581" y="690.042">InVehicle Digital Twin</text><polygon fill="#181818" points="258,120.8594,268,124.8594,258,128.8594,262,124.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="81" x2="264" y1="124.8594" y2="124.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="88" y="119.7935">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="101" y="119.7935">Register - request</text><line style="stroke:#181818;stroke-width:1.0;" x1="270" x2="312" y1="153.9922" y2="153.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="312" x2="312" y1="153.9922" y2="166.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="271" x2="312" y1="166.9922" y2="166.9922"/><polygon fill="#181818" points="281,162.9922,271,166.9922,281,170.9922,277,166.9922" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="277" y="148.9263">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="290" y="148.9263">Intercepts Register request</text><path d="M76,181.9922 L140,181.9922 L140,189.125 L130,199.125 L76,199.125 L76,181.9922 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="413.7891" style="stroke:#000000;stroke-width:1.5;" width="582" x="76" y="181.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="91" y="195.0591">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="240" x="155" y="194.2026">[contains `ManagedSubscribe` Entry]</text><path d="M86,204.125 L86,365.125 L341,365.125 L341,214.125 L331,204.125 L86,204.125 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M331,204.125 L331,214.125 L341,214.125 L331,204.125 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="92" y="221.1919">Entry that indicates to Ibeji that</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="92" y="236.3247">the Provider wants to utilize the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="92" y="251.4575">Managed Subscribe Module.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="92" y="266.5903"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="92" y="281.7231">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="108" y="296.856">protocol: "grpc"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="108" y="311.9888">operations: ["ManagedSubscribe"]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="108" y="327.1216">uri: "Provider callback uri"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="108" y="342.2544">context: ""</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="92" y="357.3872">}</text><line style="stroke:#181818;stroke-width:1.0;" x1="270" x2="312" y1="391.5859" y2="391.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="312" x2="312" y1="391.5859" y2="404.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="271" x2="312" y1="404.5859" y2="404.5859"/><polygon fill="#181818" points="281,400.5859,271,404.5859,281,408.5859,277,404.5859" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="277" y="386.52">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="290" y="386.52">Store provider callback.</text><line style="stroke:#181818;stroke-width:1.0;" x1="270" x2="312" y1="433.7188" y2="433.7188"/><line style="stroke:#181818;stroke-width:1.0;" x1="312" x2="312" y1="433.7188" y2="446.7188"/><line style="stroke:#181818;stroke-width:1.0;" x1="271" x2="312" y1="446.7188" y2="446.7188"/><polygon fill="#181818" points="281,442.7188,271,446.7188,281,450.7188,277,446.7188" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="277" y="428.6528">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="356" x="290" y="428.6528">Modify the request's `ManagedSubscribe` endpointInfo.</text><path d="M275,459.7188 L275,590.7188 L604,590.7188 L604,469.7188 L594,459.7188 L275,459.7188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M594,459.7188 L594,469.7188 L604,469.7188 L594,459.7188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="308" x="281" y="476.7856">Points to the Managed Subscribe gRPC endpoint</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="281" y="491.9185"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="281" y="507.0513">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="297" y="522.1841">protocol: "grpc"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="297" y="537.3169">operations: ["ManagedSubscribe"]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="297" y="552.4497">uri: "Ibeji uri"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="297" y="567.5825">context: "GetSubscriptionInfo"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="281" y="582.7153">}</text><polygon fill="#181818" points="641,619.9141,651,623.9141,641,627.9141,645,623.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="270" x2="647" y1="623.9141" y2="623.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="277" y="618.8481">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="290" y="618.8481">Passes on Register request</text><polygon fill="#181818" points="92,649.0469,82,653.0469,92,657.0469,88,653.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="86" x2="652" y1="653.0469" y2="653.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="98" y="647.981">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="111" y="647.981">Register - response</text><!--MD5=[5d1ecee330b4e49eabf575f7c17253b8]
@startuml Managed Subscribe Interceptor
title Managed Subscribe Interceptor Sequence
participant "Digital Twin Provider" as DTProvider
box "Ibeji"
participant "Managed Subscribe Module" as ManagedSubscribeModule
participant "InVehicle Digital Twin" as Ibeji
end box

autonumber

DTProvider -> ManagedSubscribeModule: Register - request
ManagedSubscribeModule -> ManagedSubscribeModule: Intercepts Register request

alt contains `ManagedSubscribe` Entry
note right of DTProvider
Entry that indicates to Ibeji that
the Provider wants to utilize the
Managed Subscribe Module.

{
    protocol: "grpc"
    operations: ["ManagedSubscribe"]
    uri: "Provider callback uri"
    context: ""
}
end note
ManagedSubscribeModule -> ManagedSubscribeModule: Store provider callback.
ManagedSubscribeModule -> ManagedSubscribeModule: Modify the request's `ManagedSubscribe` endpointInfo.
note right of ManagedSubscribeModule
Points to the Managed Subscribe gRPC endpoint

{
    protocol: "grpc"
    operations: ["ManagedSubscribe"]
    uri: "Ibeji uri"
    context: "GetSubscriptionInfo"
}
end note
end

Ibeji <- ManagedSubscribeModule: Passes on Register request
Ibeji -> DTProvider: Register - response
@enduml

PlantUML version 1.2022.7(Mon Aug 22 10:01:30 PDT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>