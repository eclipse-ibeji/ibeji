<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="728px" preserveAspectRatio="none" style="width:758px;height:728px;background:#FEFEFE;" version="1.1" viewBox="0 0 758 728" width="758px" zoomAndPan="magnify"><defs><filter height="300%" id="f1pzhcnnek87rb" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="369" x="191" y="26.708">Managed Subscribe Interceptor Sequence</text><rect fill="#DDDDDD" height="678.0469" style="stroke: #A80036; stroke-width: 1.0;" width="577" x="170" y="38.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="443" y="51.02">Ibeji</text><rect fill="#FEFEFE" filter="url(#f1pzhcnnek87rb)" height="421.7891" style="stroke: #000000; stroke-width: 2.0;" width="586" x="81" y="181.6484"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="86" x2="86" y1="93.3828" y2="678.7031"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="279" x2="279" y1="93.3828" y2="678.7031"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="662" x2="662" y1="93.3828" y2="678.7031"/><rect fill="#FEFECE" filter="url(#f1pzhcnnek87rb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="152" x="8" y="58.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="138" x="15" y="78.0811">Digital Twin Provider</text><rect fill="#FEFECE" filter="url(#f1pzhcnnek87rb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="152" x="8" y="677.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="138" x="15" y="697.6982">Digital Twin Provider</text><rect fill="#FEFECE" filter="url(#f1pzhcnnek87rb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="206" x="174" y="58.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="192" x="181" y="78.0811">Managed Subscribe Module</text><rect fill="#FEFECE" filter="url(#f1pzhcnnek87rb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="206" x="174" y="677.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="192" x="181" y="697.6982">Managed Subscribe Module</text><rect fill="#FEFECE" filter="url(#f1pzhcnnek87rb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="581" y="58.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="144" x="588" y="78.0811">InVehicle Digital Twin</text><rect fill="#FEFECE" filter="url(#f1pzhcnnek87rb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="581" y="677.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="144" x="588" y="697.6982">InVehicle Digital Twin</text><polygon fill="#A80036" points="267,120.5156,277,124.5156,267,128.5156,271,124.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="86" x2="273" y1="124.5156" y2="124.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="93" y="119.4497">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="106" y="119.4497">Register - request</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="279" x2="321" y1="153.6484" y2="153.6484"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="321" x2="321" y1="153.6484" y2="166.6484"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="280" x2="321" y1="166.6484" y2="166.6484"/><polygon fill="#A80036" points="290,162.6484,280,166.6484,290,170.6484,286,166.6484" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="286" y="148.5825">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="299" y="148.5825">Intercepts Register request</text><path d="M81,181.6484 L145,181.6484 L145,188.6484 L135,198.6484 L81,198.6484 L81,181.6484 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="421.7891" style="stroke: #000000; stroke-width: 2.0;" width="586" x="81" y="181.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="96" y="194.7153">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="240" x="160" y="193.8589">[contains `ManagedSubscribe` Entry]</text><path d="M91,203.7813 L91,364.7813 L346,364.7813 L346,213.7813 L336,203.7813 L91,203.7813 " fill="#FBFB77" filter="url(#f1pzhcnnek87rb)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M336,203.7813 L336,213.7813 L346,213.7813 L336,203.7813 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="97" y="220.8481">Entry that indicates to Ibeji that</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="97" y="235.981">the Provider wants to utilize the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="97" y="251.1138">Managed Subscribe Module.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="101" y="266.2466"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="97" y="281.3794">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="113" y="296.5122">protocol: "grpc"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="113" y="311.645">operations: ["ManagedSubscribe"]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="113" y="326.7778">uri: "Provider callback uri"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="113" y="341.9106">context: ""</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="97" y="357.0435">}</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="279" x2="321" y1="395.2422" y2="395.2422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="321" x2="321" y1="395.2422" y2="408.2422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="280" x2="321" y1="408.2422" y2="408.2422"/><polygon fill="#A80036" points="290,404.2422,280,408.2422,290,412.2422,286,408.2422" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="286" y="390.1763">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="299" y="390.1763">Store provider callback.</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="279" x2="321" y1="437.375" y2="437.375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="321" x2="321" y1="437.375" y2="450.375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="280" x2="321" y1="450.375" y2="450.375"/><polygon fill="#A80036" points="290,446.375,280,450.375,290,454.375,286,450.375" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="286" y="432.3091">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="356" x="299" y="432.3091">Modify the request's `ManagedSubscribe` endpointInfo.</text><path d="M284,463.375 L284,594.375 L613,594.375 L613,473.375 L603,463.375 L284,463.375 " fill="#FBFB77" filter="url(#f1pzhcnnek87rb)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M603,463.375 L603,473.375 L613,473.375 L603,463.375 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="308" x="290" y="480.4419">Points to the Managed Subscribe gRPC endpoint</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="294" y="495.5747"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="290" y="510.7075">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="306" y="525.8403">protocol: "grpc"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="306" y="540.9731">operations: ["ManagedSubscribe"]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="306" y="556.106">uri: "Ibeji uri"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="306" y="571.2388">context: "GetSubscriptionInfo"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="290" y="586.3716">}</text><polygon fill="#A80036" points="650,627.5703,660,631.5703,650,635.5703,654,631.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="279" x2="656" y1="631.5703" y2="631.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="286" y="626.5044">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="299" y="626.5044">Passes on Register request</text><polygon fill="#A80036" points="97,656.7031,87,660.7031,97,664.7031,93,660.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="91" x2="661" y1="660.7031" y2="660.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="103" y="655.6372">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="116" y="655.6372">Register - response</text><!--MD5=[8d0978598c0431ddc9e272d4dee8984f]
@startuml
skinparamlocked backgroundColor fefefe
title Managed Subscribe Interceptor Sequence
participant "Digital Twin Provider" as DTProvider
box "Ibeji"
participant "Managed Subscribe Module" as ManagedSubscribeModule
participant "InVehicle Digital Twin" as Ibeji
end box

autonumber

DTProvider -> ManagedSubscribeModule: Register - request
ManagedSubscribeModule -> ManagedSubscribeModule: Intercepts Register request

alt contains `ManagedSubscribe` Entry
note right of DTProvider
Entry that indicates to Ibeji that
the Provider wants to utilize the
Managed Subscribe Module.

{
    protocol: "grpc"
    operations: ["ManagedSubscribe"]
    uri: "Provider callback uri"
    context: ""
}
end note
ManagedSubscribeModule -> ManagedSubscribeModule: Store provider callback.
ManagedSubscribeModule -> ManagedSubscribeModule: Modify the request's `ManagedSubscribe` endpointInfo.
note right of ManagedSubscribeModule
Points to the Managed Subscribe gRPC endpoint

{
    protocol: "grpc"
    operations: ["ManagedSubscribe"]
    uri: "Ibeji uri"
    context: "GetSubscriptionInfo"
}
end note
end

Ibeji <- ManagedSubscribeModule: Passes on Register request
Ibeji -> DTProvider: Register - response
@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.22+7
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>