<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="723px" preserveAspectRatio="none" style="width:758px;height:723px;background:#FEFEFE;" version="1.1" viewBox="0 0 758 723" width="758px" zoomAndPan="magnify"><defs><filter height="300%" id="f1pzhcnnek87rb" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="333" x="209" y="22.9951">Managed Subscribe Interceptor Sequence</text><rect fill="#DDDDDD" height="678.0469" style="stroke: #A80036; stroke-width: 1.0;" width="577" x="170" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="443" y="46.3638">Ibeji</text><rect fill="#FEFEFE" filter="url(#f1pzhcnnek87rb)" height="421.7891" style="stroke: #000000; stroke-width: 2.0;" width="586" x="81" y="176.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="86" x2="86" y1="88.7266" y2="674.0469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="279" x2="279" y1="88.7266" y2="674.0469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="662" x2="662" y1="88.7266" y2="674.0469"/><rect fill="#FEFECE" filter="url(#f1pzhcnnek87rb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="152" x="8" y="53.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="138" x="15" y="73.4248">Digital Twin Provider</text><rect fill="#FEFECE" filter="url(#f1pzhcnnek87rb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="152" x="8" y="673.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="138" x="15" y="693.042">Digital Twin Provider</text><rect fill="#FEFECE" filter="url(#f1pzhcnnek87rb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="206" x="174" y="53.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="192" x="181" y="73.4248">Managed Subscribe Module</text><rect fill="#FEFECE" filter="url(#f1pzhcnnek87rb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="206" x="174" y="673.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="192" x="181" y="693.042">Managed Subscribe Module</text><rect fill="#FEFECE" filter="url(#f1pzhcnnek87rb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="581" y="53.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="144" x="588" y="73.4248">InVehicle Digital Twin</text><rect fill="#FEFECE" filter="url(#f1pzhcnnek87rb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="581" y="673.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="144" x="588" y="693.042">InVehicle Digital Twin</text><polygon fill="#A80036" points="267,115.8594,277,119.8594,267,123.8594,271,119.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="86" x2="273" y1="119.8594" y2="119.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="93" y="114.7935">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="106" y="114.7935">Register - request</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="279" x2="321" y1="148.9922" y2="148.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="321" x2="321" y1="148.9922" y2="161.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="280" x2="321" y1="161.9922" y2="161.9922"/><polygon fill="#A80036" points="290,157.9922,280,161.9922,290,165.9922,286,161.9922" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="286" y="143.9263">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="299" y="143.9263">Intercepts Register request</text><path d="M81,176.9922 L145,176.9922 L145,183.9922 L135,193.9922 L81,193.9922 L81,176.9922 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="421.7891" style="stroke: #000000; stroke-width: 2.0;" width="586" x="81" y="176.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="96" y="190.0591">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="240" x="160" y="189.2026">[contains `ManagedSubscribe` Entry]</text><path d="M91,199.125 L91,360.125 L346,360.125 L346,209.125 L336,199.125 L91,199.125 " fill="#FBFB77" filter="url(#f1pzhcnnek87rb)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M336,199.125 L336,209.125 L346,209.125 L336,199.125 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="97" y="216.1919">Entry that indicates to Ibeji that</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="97" y="231.3247">the Provider wants to utilize the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="97" y="246.4575">Managed Subscribe Module.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="101" y="261.5903"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="97" y="276.7231">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="113" y="291.856">protocol: "grpc"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="113" y="306.9888">operations: ["ManagedSubscribe"]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="113" y="322.1216">uri: "Provider callback uri"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="113" y="337.2544">context: ""</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="97" y="352.3872">}</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="279" x2="321" y1="390.5859" y2="390.5859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="321" x2="321" y1="390.5859" y2="403.5859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="280" x2="321" y1="403.5859" y2="403.5859"/><polygon fill="#A80036" points="290,399.5859,280,403.5859,290,407.5859,286,403.5859" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="286" y="385.52">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="299" y="385.52">Store provider callback.</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="279" x2="321" y1="432.7188" y2="432.7188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="321" x2="321" y1="432.7188" y2="445.7188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="280" x2="321" y1="445.7188" y2="445.7188"/><polygon fill="#A80036" points="290,441.7188,280,445.7188,290,449.7188,286,445.7188" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="286" y="427.6528">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="356" x="299" y="427.6528">Modify the request's `ManagedSubscribe` endpointInfo.</text><path d="M284,458.7188 L284,589.7188 L613,589.7188 L613,468.7188 L603,458.7188 L284,458.7188 " fill="#FBFB77" filter="url(#f1pzhcnnek87rb)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M603,458.7188 L603,468.7188 L613,468.7188 L603,458.7188 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="308" x="290" y="475.7856">Points to the Managed Subscribe gRPC endpoint</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="294" y="490.9185"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="290" y="506.0513">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="306" y="521.1841">protocol: "grpc"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="306" y="536.3169">operations: ["ManagedSubscribe"]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="306" y="551.4497">uri: "Ibeji uri"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="306" y="566.5825">context: "GetSubscriptionInfo"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="290" y="581.7153">}</text><polygon fill="#A80036" points="650,622.9141,660,626.9141,650,630.9141,654,626.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="279" x2="656" y1="626.9141" y2="626.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="286" y="621.8481">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="299" y="621.8481">Passes on Register request</text><polygon fill="#A80036" points="97,652.0469,87,656.0469,97,660.0469,93,656.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="91" x2="661" y1="656.0469" y2="656.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="103" y="650.981">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="116" y="650.981">Register - response</text><!--
@startuml
skinparamlocked backgroundColor fefefe
title Managed Subscribe Interceptor Sequence
participant "Digital Twin Provider" as DTProvider
box "Ibeji"
participant "Managed Subscribe Module" as ManagedSubscribeModule
participant "InVehicle Digital Twin" as Ibeji
end box

autonumber

DTProvider -> ManagedSubscribeModule: Register - request
ManagedSubscribeModule -> ManagedSubscribeModule: Intercepts Register request

alt contains `ManagedSubscribe` Entry
note right of DTProvider
Entry that indicates to Ibeji that
the Provider wants to utilize the
Managed Subscribe Module.

{
    protocol: "grpc"
    operations: ["ManagedSubscribe"]
    uri: "Provider callback uri"
    context: ""
}
end note
ManagedSubscribeModule -> ManagedSubscribeModule: Store provider callback.
ManagedSubscribeModule -> ManagedSubscribeModule: Modify the request's `ManagedSubscribe` endpointInfo.
note right of ManagedSubscribeModule
Points to the Managed Subscribe gRPC endpoint

{
    protocol: "grpc"
    operations: ["ManagedSubscribe"]
    uri: "Ibeji uri"
    context: "GetSubscriptionInfo"
}
end note
end

Ibeji <- ManagedSubscribeModule: Passes on Register request
Ibeji -> DTProvider: Register - response
@enduml

PlantUML version 1.2018.13(Mon Nov 26 09:11:51 PST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.21+9-post-Ubuntu-0ubuntu120.04
Operating System: Linux
OS Version: 5.4.0-171-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>