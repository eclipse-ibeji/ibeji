<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="640px" preserveAspectRatio="none" style="width:613px;height:640px;background:#FFFFFF;" version="1.1" viewBox="0 0 613 640" width="613px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.2969" id="_title" style="stroke:none;stroke-width:1.0;" width="343" x="134.25" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="333" x="139.25" y="27.9951">Managed Subscribe Interceptor Sequence</text><rect fill="none" height="368.3906" style="stroke:#000000;stroke-width:1.5;" width="547" x="45" y="161.8594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="50" x2="50" y1="73.5938" y2="605.5156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="204" x2="204" y1="73.5938" y2="605.5156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="586.5" x2="586.5" y1="73.5938" y2="605.5156"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="12" y="62.292">DTProvider</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="5" y="604.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="12" y="624.5107">DTProvider</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="198" x="105" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="184" x="112" y="62.292">ManagedSubscribeModule</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="198" x="105" y="604.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="184" x="112" y="624.5107">ManagedSubscribeModule</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="41" x="566.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="573.5" y="62.292">Ibeji</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="41" x="566.5" y="604.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="573.5" y="624.5107">Ibeji</text><polygon fill="#181818" points="192,100.7266,202,104.7266,192,108.7266,196,104.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="50" x2="198" y1="104.7266" y2="104.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="57" y="99.6606">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="70" y="99.6606">Register - request</text><line style="stroke:#181818;stroke-width:1.0;" x1="204" x2="246" y1="133.8594" y2="133.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="246" x2="246" y1="133.8594" y2="146.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="205" x2="246" y1="146.8594" y2="146.8594"/><polygon fill="#181818" points="215,142.8594,205,146.8594,215,150.8594,211,146.8594" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="211" y="128.7935">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="224" y="128.7935">Intercepts Register request</text><path d="M45,161.8594 L109,161.8594 L109,168.9922 L99,178.9922 L45,178.9922 L45,161.8594 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="368.3906" style="stroke:#000000;stroke-width:1.5;" width="547" x="45" y="161.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="60" y="174.9263">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="240" x="124" y="174.0698">[contains `ManagedSubscribe` Entry]</text><path d="M55,183.9922 L55,314.9922 L392,314.9922 L392,193.9922 L382,183.9922 L55,183.9922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M382,183.9922 L382,193.9922 L392,193.9922 L382,183.9922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="293" x="61" y="201.0591">// Entry that indicates to Ibeji that the Provider</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="316" x="61" y="216.1919">// wants to utilize the Managed Subscribe Module.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="61" y="231.3247">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="77" y="246.4575">protocol: "grpc"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="77" y="261.5903">operations: ["ManagedSubscribe"]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="77" y="276.7231">uri: "Provider callback uri"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="77" y="291.856">context: ""</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="61" y="306.9888">}</text><line style="stroke:#181818;stroke-width:1.0;" x1="204" x2="246" y1="341.1875" y2="341.1875"/><line style="stroke:#181818;stroke-width:1.0;" x1="246" x2="246" y1="341.1875" y2="354.1875"/><line style="stroke:#181818;stroke-width:1.0;" x1="205" x2="246" y1="354.1875" y2="354.1875"/><polygon fill="#181818" points="215,350.1875,205,354.1875,215,358.1875,211,354.1875" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="211" y="336.1216">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="224" y="336.1216">Store provider callback.</text><line style="stroke:#181818;stroke-width:1.0;" x1="204" x2="246" y1="383.3203" y2="383.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="246" x2="246" y1="383.3203" y2="396.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="205" x2="246" y1="396.3203" y2="396.3203"/><polygon fill="#181818" points="215,392.3203,205,396.3203,215,400.3203,211,396.3203" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="211" y="378.2544">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="356" x="224" y="378.2544">Modify the request's `ManagedSubscribe` endpointInfo.</text><path d="M209,409.3203 L209,524.3203 L550,524.3203 L550,419.3203 L540,409.3203 L209,409.3203 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M540,409.3203 L540,419.3203 L550,419.3203 L540,409.3203 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320" x="215" y="426.3872">// Points to the Managed Subscribe gRPC endpoint</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="215" y="441.52">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="231" y="456.6528">protocol: "grpc"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="231" y="471.7856">operations: ["ManagedSubscribe"]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="231" y="486.9185">uri: "Ibeji uri"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="231" y="502.0513">context: "GetSubscriptionInfo"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="215" y="517.1841">}</text><polygon fill="#181818" points="575,554.3828,585,558.3828,575,562.3828,579,558.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="204" x2="581" y1="558.3828" y2="558.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="211" y="553.3169">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="224" y="553.3169">Passes on Register request</text><polygon fill="#181818" points="61,583.5156,51,587.5156,61,591.5156,57,587.5156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="55" x2="586" y1="587.5156" y2="587.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="67" y="582.4497">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="80" y="582.4497">Register - response</text><!--MD5=[a1da5d022c80fa4c98b7489d50709ed2]
@startuml Managed Subscribe Interceptor
title Managed Subscribe Interceptor Sequence
participant DTProvider
participant ManagedSubscribeModule
participant Ibeji

autonumber

DTProvider -> ManagedSubscribeModule: Register - request
ManagedSubscribeModule -> ManagedSubscribeModule: Intercepts Register request

alt contains `ManagedSubscribe` Entry
note right of DTProvider
// Entry that indicates to Ibeji that the Provider
// wants to utilize the Managed Subscribe Module.
{
    protocol: "grpc"
    operations: ["ManagedSubscribe"]
    uri: "Provider callback uri"
    context: ""
}
end note
ManagedSubscribeModule -> ManagedSubscribeModule: Store provider callback.
ManagedSubscribeModule -> ManagedSubscribeModule: Modify the request's `ManagedSubscribe` endpointInfo.
note right of ManagedSubscribeModule
// Points to the Managed Subscribe gRPC endpoint
{
    protocol: "grpc"
    operations: ["ManagedSubscribe"]
    uri: "Ibeji uri"
    context: "GetSubscriptionInfo"
}
end note
end

Ibeji <- ManagedSubscribeModule: Passes on Register request
Ibeji -> DTProvider: Register - response
@enduml

PlantUML version 1.2022.7(Mon Aug 22 10:01:30 PDT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>